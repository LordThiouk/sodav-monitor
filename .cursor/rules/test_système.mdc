---
description: ğŸ¯RÃ¨gles pour Tester Tout le SystÃ¨me et Mesurer sa Performance avec de Vraies DonnÃ©es
globs: *
---


Lâ€™objectif est de **tester lâ€™ensemble du systÃ¨me**, incluant la **dÃ©tection, le stockage, la mise Ã  jour des statistiques et la performance** en utilisant **de vraies donnÃ©es audio et stations de radio.**  

---

## **ğŸ“Œ 1. Tests Fonctionnels Globaux**
Les tests doivent couvrir **toutes les fonctionnalitÃ©s clÃ©s** :

### **ğŸµ DÃ©tection de Musique**
âœ… Tester la **dÃ©tection locale** avec empreintes existantes (`fingerprint`).  
âœ… Tester la **dÃ©tection via MusicBrainz** lorsque la dÃ©tection locale Ã©choue.  
âœ… Tester la **dÃ©tection via Audd.io** en dernier recours.  

### **â³ DurÃ©e de Lecture**
âœ… VÃ©rifier que `play_duration` correspond **exactement** Ã  la durÃ©e de lecture rÃ©elle.  
âœ… Sâ€™assurer que les interruptions (pubs, silences) **ne faussent pas la durÃ©e**.  
âœ… Comparer la durÃ©e calculÃ©e avec un **timestamp de rÃ©fÃ©rence**.  

### **ğŸ“Š Mise Ã  Jour des Statistiques**
âœ… Tester la mise Ã  jour des **statistiques des musiques** (`TrackStats`).  
âœ… VÃ©rifier que `StationStats` reflÃ¨te **le temps total de musique jouÃ© par station**.  
âœ… VÃ©rifier la cohÃ©rence de `ArtistStats` sur plusieurs jours.  
âœ… Confirmer que `AnalyticsData` stocke bien **le taux de dÃ©tection** et la **confiance moyenne**.  

### **ğŸ“œ GÃ©nÃ©ration de Rapports**
âœ… VÃ©rifier quâ€™un **rapport complet** (`Report`) est bien gÃ©nÃ©rÃ© avec toutes les donnÃ©es.  
âœ… Tester lâ€™export des fichiers CSV avec toutes les informations requises.  
âœ… VÃ©rifier que les **subscriptions envoient bien les rapports pÃ©riodiques**.  

---

## **ğŸ“Œ 2. Tests de Performance et ScalabilitÃ©**
**ğŸ¯ Objectif : Mesurer la rapiditÃ© et lâ€™efficacitÃ© du systÃ¨me sous forte charge.**

### **ğŸ”„ Test de ScalabilitÃ©**
âœ… Simuler **100+ stations de radio en simultanÃ©**.  
âœ… VÃ©rifier si le **temps moyen de dÃ©tection** reste infÃ©rieur Ã  **5 sec** par Ã©chantillon.  
âœ… Observer lâ€™impact de **1000+ dÃ©tections en une heure** sur la base de donnÃ©es.  

### **ğŸ•’ Temps de Traitement**
âœ… Mesurer la **latence moyenne** de dÃ©tection (objectif < 2 sec).  
âœ… VÃ©rifier le **temps dâ€™enregistrement des empreintes** en base.  
âœ… Optimiser les requÃªtes SQL pour Ã©viter les **goulots dâ€™Ã©tranglement**.  

### **ğŸ“¡ FiabilitÃ© des Flux Radio**
âœ… VÃ©rifier que le **systÃ¨me continue de fonctionner** en cas de coupure temporaire.  
âœ… Tester le comportement en cas de **flux radio non disponible**.  

---

## **ğŸ“Œ 3. Automatisation des Tests**
âœ… **ExÃ©cuter des tests unitaires** sur toutes les fonctions critiques (`pytest`).  
âœ… **Mettre en place des tests dâ€™intÃ©gration** pour valider lâ€™ensemble du pipeline.  
âœ… **Utiliser des logs dÃ©taillÃ©s** pour dÃ©tecter les erreurs en cas dâ€™Ã©chec de test.  
âœ… **Comparer les donnÃ©es dÃ©tectÃ©es avec une base de rÃ©fÃ©rence** pour valider les rÃ©sultats.  

---

### **ğŸš€ Application des RÃ¨gles**
âœ” **ImplÃ©menter ces rÃ¨gles dans Cursor AI** pour tester chaque commit.  
âœ” **GÃ©nÃ©rer des logs de performance et les analyser automatiquement**.  
âœ” **Sâ€™assurer que toutes les mises Ã  jour de donnÃ©es sont cohÃ©rentes**.  

---

ğŸ¯ **Objectif Final** : **Garantir la fiabilitÃ© du systÃ¨me** avec de **vraies stations et musiques**, tout en optimisant ses performances sous forte charge. ğŸš€